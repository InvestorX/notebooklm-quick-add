<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NotebookLM Quick Add</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-icon">📓</div>
      <h1>NotebookLM Quick Add</h1>
    </header>

    <!-- Tab Navigation -->
    <nav class="tabs">
      <button id="tab-add" class="tab active" data-tab="add">
        <span class="tab-icon">➕</span>
        <span>追加</span>
      </button>
      <button id="tab-queue" class="tab" data-tab="queue">
        <span class="tab-icon">📋</span>
        <span>キュー</span>
        <span id="queue-badge" class="badge hidden">0</span>
      </button>
    </nav>

    <!-- Content Area -->
    <div id="content-area">
      <!-- Loading State -->
      <div id="state-loading" class="loading">
        <div class="spinner"></div>
        <p>ページを検出中...</p>
      </div>

      <!-- Add Tab Content -->
      <div id="panel-add" class="panel hidden">
        <section class="section">
          <div id="page-type-badge" class="page-type-badge webpage">
            <span id="badge-icon">🌐</span>
            <span id="badge-text">ウェブページ</span>
          </div>
          <h2 id="page-title" class="page-title">ページタイトル</h2>
          <p id="page-url" class="page-url">https://example.com</p>
        </section>

        <section id="playlist-section" class="section hidden">
          <div class="playlist-info">
            <span>📋</span>
            <span id="playlist-count" class="playlist-count">0本の動画</span>
          </div>
          <p class="playlist-note">※ プレイリスト内の全動画が追加されます</p>
        </section>

        <section class="section">
          <div class="section-header">
            <h3>追加先ノートブック</h3>
            <button id="refresh-notebooks" class="refresh-link" title="ノートブック一覧を更新">
              ↻ 更新
            </button>
          </div>
          <select id="notebook-select" class="notebook-select">
            <option value="">新しいノートブックを作成</option>
          </select>
          <p id="notebook-hint" class="hint hidden">💡 NotebookLMを開いてノートブック一覧を取得してください</p>
        </section>

        <section class="actions">
          <div class="action-buttons">
            <button id="add-to-queue-btn" class="btn btn-secondary">
              <span>📋 キューに追加</span>
            </button>
            <button id="add-now-btn" class="btn btn-secondary">
              <span>⚡ 今すぐ追加</span>
            </button>
          </div>
        </section>
      </div>

      <!-- Queue Tab Content -->
      <div id="panel-queue" class="panel hidden">
        <div id="queue-empty" class="queue-empty">
          <div class="empty-icon">📭</div>
          <p>キューは空です</p>
          <p class="empty-hint">「キューに追加」ボタンでURLを保存できます</p>
        </div>

        <div id="queue-list" class="queue-list hidden">
          <!-- Dynamic content -->
        </div>

        <div id="queue-actions" class="queue-actions hidden">
          <button id="process-queue-btn" class="btn btn-primary">
            <span>🚀 一括追加</span>
          </button>
          <button id="clear-queue-btn" class="btn btn-danger-outline">
            <span>🗑️ すべてクリア</span>
          </button>
        </div>
      </div>

      <!-- Error State -->
      <div id="state-error" class="state-container error-state hidden">
        <div class="state-icon">⚠️</div>
        <p id="error-message">エラーが発生しました</p>
        <button id="retry-btn" class="btn btn-secondary">再試行</button>
      </div>

      <!-- Success State -->
      <div id="state-success" class="state-container success-state hidden">
        <div class="state-icon">✓</div>
        <p id="success-message">キューに追加しました！</p>
        <button id="continue-btn" class="btn btn-primary">続ける</button>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      💡 右クリックメニューからも追加できます
    </footer>
  </div>

  <script src="popup.js"></script>
</body>

</html>